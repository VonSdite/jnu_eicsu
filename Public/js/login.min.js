try{$(document).ready(function(){$("#login_button").click(function(){function n(e){console.log("IsValid");re=/select|update|delete|exec|count|'|"|=|;|>|<|%/i;if(re.test(e.toLowerCase())){return false}return true}function r(e){console.log("validUserName");re=/^\d{10}$/;if(re.test(e)&&n(e)&&e.length==10){return true}else{return false}}function i(e){console.log("validUserPW");return n(e)}var e=$("#user_login_name").val();var t=$("#user_login_pw").val();if(""==$("#vertication_code").val()){$("#login_error").html("*验证码不能为空!");$("#vertication_code").css("border-color","red");return false}else{try{checknumber=$("#vertication_code").val();var s;$.ajax({type:"POST",url:APP+"/Login/vertication",data:{checknumber:checknumber},dataType:"json",async:false,success:function(e){s=e}});if(s.checked==0){$("#login_error").html("*验证码错误!");$("#vertication_code").css("border-color","red").val("");$("#vertication_img").attr("src",URL+"/vertication");return false}}catch(o){$("#login_error").html("*验证码发送错误,请刷新页面重新登录");return false}}if(!r(e)){$("#login_error").html("*非法用户名!");$("#user_login_name").css("border-color","red").val("");return false}else if(!i(t)){$("#login_error").html("*密码或用户名错误！");$("#user_login_pw").css("border-color","red").val("");return false}else if(""==e){$("#login_error").html("*用户名不能为空！");$("#user_login_name").css("border-color","red");return false}else{$("form #user_login_pw").val(hex_md5($("form #user_login_pw").val()));return true}});$("#cancel_button").click(function(){history.go(-1)});$("#user_login_name,#user_login_pw,#vertication_code").focus(function(){$(this).css("border-color","black")}).blur(function(){$(this).css("border-color","#999999")});$("#vertication_img").attr("src",APP+"/Login/vertication").click(function(){$("#vertication_img").attr("src",APP+"/Login/vertication")})})}catch(err){document.getElementById("login_error").innerHTML="*"+err+"	请联系系统管理员";document.getElementById("login_button").onclick=function(){return false}}